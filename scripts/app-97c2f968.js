"use strict";angular.module("mainModule",[]),function(e,t){function o(e,o,a,n){function i(t){return e(c.child(n)).$asArray().$add({job:t.job,department:t.department}).then(function(o){return e(r.child(a)).$asArray().$add({name:t.name,detailsId:o.key()}).then(function(e){return e.key()})})}function l(){return e(r.child(a)).$asArray()}function s(t){return e(c.child(n).child(t)).$asObject()}var r=new t(o),c=new t(o);return{add:i,getUsers:l,getUserDetails:s}}o.$inject=["$firebase","baseUrl","userUrl","detailsUrl","$q"],e.module("mainModule").factory("backEnd",o)}(angular,Firebase),function(e,t){function o(e,o,a){function n(e,t){var o=a.defer();return s.authWithPassword({email:e,password:t},function(e,t){e?o.reject():o.resolve(t)},{remember:"sessionOnly"}),o.promise}function i(){s.unauth()}function l(){return s.getAuth()}var s=new t(o);return{authService:e(s),login:n,logout:i,checkAuth:l}}o.$inject=["$firebaseAuth","baseUrl","$q"],e.module("mainModule").factory("auth",o)}(angular,Firebase),angular.module("mainModule").controller("MainCtrl",["$scope","auth","$state",function(e,t,o){e.showError=!1,t.checkAuth()&&o.go("account"),e.signIn=function(){t.login(e.email,e.password).then(function(){o.go("account")},function(){e.showError=!0})}}]),angular.module("accountModule",[]),function(e){function t(e,t,o){function a(e,t,a){e.url=o.protocol()+"://"+o.host()+":"+o.port()+"/#/account/"+a,e.ok=function(){t.close(e.user)},e.cancel=function(){t.dismiss("cancel")}}function n(o){var n=t.defer(),i=e.open({templateUrl:"app/account/popUps/views/sharePopUp.html",controller:a,backdrop:"static",size:"lg",resolve:{id:function(){return o}}});return i.result.then(function(){n.resolve()},function(){n.reject()}),n.promise}return a.$inject=["$scope","$modalInstance","id"],{open:n}}t.$inject=["$modal","$q","$location"],e.module("accountModule").factory("sharePopUp",t)}(angular,_),function(e){function t(t,o){function a(e,t,o,a){e.user=o,e.details=a,e.ok=function(){e.user.name&&e.details.job&&e.details.department?t.close({user:e.user,details:e.details}):e.showError=!0},e.cancel=function(){t.dismiss("cancel")}}function n(n,i){var l=o.defer(),s=t.open({templateUrl:"app/account/popUps/views/editPopUp.html",controller:a,backdrop:"static",size:"lg",resolve:{user:function(){return e.copy(n)},details:function(){return e.copy(i)}}});return s.result.then(function(e){l.resolve(e)},function(){l.reject()}),l.promise}return a.$inject=["$scope","$modalInstance","user","details"],{open:n}}t.$inject=["$modal","$q"],e.module("accountModule").factory("editPopUp",t)}(angular,_),function(e){function t(e,t){function o(e,t,o){e.id=o,e.ok=function(){t.close()},e.cancel=function(){t.dismiss("cancel")}}function a(a){var n=t.defer(),i=e.open({templateUrl:"app/account/popUps/views/deletePopUp.html",controller:o,backdrop:"static",size:"lg",resolve:{id:function(){return a}}});return i.result.then(function(e){n.resolve(e)},function(){n.reject()}),n.promise}return o.$inject=["$scope","$modalInstance","id"],{open:a}}t.$inject=["$modal","$q"],e.module("accountModule").factory("deletePopUp",t)}(angular,_),function(e){function t(e,t){function o(e,t){e.user={},e.ok=function(){e.user.name&&e.user.job&&e.user.department?t.close(e.user):e.showError=!0},e.cancel=function(){t.dismiss("cancel")}}function a(){var a=t.defer(),n=e.open({templateUrl:"app/account/popUps/views/addPopUp.html",controller:o,backdrop:"static",size:"lg"});return n.result.then(function(e){a.resolve(e)},function(){a.reject()}),a.promise}return o.$inject=["$scope","$modalInstance"],{open:a}}t.$inject=["$modal","$q"],e.module("accountModule").factory("addPopUp",t)}(angular,_),angular.module("accountModule").controller("accountController",["$scope","addPopUp","deletePopUp","editPopUp","sharePopUp","backEnd","people","$state","auth","$location",function(e,t,o,a,n,i,l,s,r,c){e.people=l,e.add=function(){t.open().then(function(e){i.add(e)})},e.logout=function(){r.logout(),s.go("home")},e["delete"]=function(){o.open(s.params.id).then(function(){e.people.$remove(e.user),c.url("account")})},e.edit=function(){a.open(e.user,e.userDetails).then(function(t){e.user.name=t.user.name,e.userDetails.job=t.details.job,e.userDetails.department=t.details.department,e.userDetails.$save(),e.people.$save(e.user)})},e.share=function(){n.open(e.user.$id)},e.open=function(t){e.user=e.people.$getRecord(t),e.userDetails=null,e.userDetails=i.getUserDetails(e.user.detailsId)},s.params.id&&l.$loaded().then(function(){e.user=e.people.$getRecord(s.params.id),e.userDetails=i.getUserDetails(e.user.detailsId)})}]),angular.module("mainModule").config(["$stateProvider",function(e){e.state("home",{url:"/",templateUrl:"app/home/views/home.html",controller:"MainCtrl"})}]),angular.module("accountModule").config(["$stateProvider",function(e){e.state("account",{url:"/account/:id",templateUrl:"app/account/views/account.html",controller:"accountController",resolve:{currentAuth:["auth",function(e){return e.authService.$requireAuth()}],people:["backEnd",function(e){return e.getUsers()}]}})}]),angular.module("handsomeTry",["ui.router","mainModule","accountModule","ui.bootstrap","firebase"]).config(["$urlRouterProvider",function(e){e.otherwise("/")}]),angular.module("handsomeTry").config(["$provide",function(e){e.constant("baseUrl","https://sweltering-fire-6010.firebaseio.com/"),e.constant("userUrl","users"),e.constant("detailsUrl","details")}]),angular.module("handsomeTry").run(["$rootScope","$state",function(e,t){e.$on("$stateChangeError",function(e,o,a,n,i,l){"AUTH_REQUIRED"===l&&t.go("home")})}]),function(e){try{e=angular.module("handsomeTry")}catch(t){e=angular.module("handsomeTry",[])}e.run(["$templateCache",function(e){e.put("app/home/views/home.html",'<div class="login-page"><div class="content-wrapper"><div class="login-form"><div class="header"><div class="banner"><img src="http://placehold.it/265x80&text=Logo%20or%20banner"></div></div><div class="info"><p>Sign in form</p></div><div class="user-name"><p>Username</p></div><div class="user-name-input"><i class="fa fa-envelope"></i> <input type="email" ng-model="email"></div><div class="password"><p>Password</p></div><div class="password-input"><i class="fa fa-lock"></i> <input type="password" ng-model="password"></div><div class="sign-in"><a href="" ng-click="signIn()">Sign in</a><a ng-show="showError">Authentification error</a></div><div class="footer"></div></div><div class="additional-info"><div class="logo"><img src="http://placehold.it/265x80&text=Logo%20picture" alt="Logo"></div><div class="header"><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Sit, quod?</p></div><div class="text"><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Eaque illo rem et laboriosam distinctio doloribus veritatis repellat, quaerat officiis, amet praesentium obcaecati, quia modi numquam eum consequuntur tempore libero voluptates cupiditate perspiciatis harum accusamus minus? Numquam repellat molestiae impedit, officia.</p></div></div></div></div>')}])}(),function(e){try{e=angular.module("handsomeTry")}catch(t){e=angular.module("handsomeTry",[])}e.run(["$templateCache",function(e){e.put("app/account/views/account.html",'<div class="account"><ul class="left-side"><li ng-repeat="human in people"><a href="" ng-click="open(human.$id)">{{human.name}}</a></li></ul><div class="middle" ng-show="userDetails"><p>job: {{userDetails.job}}</p><p>department: {{userDetails.department}}</p></div><div class="controls"><a href="" ng-click="add()">Add</a> <a href="" ng-click="delete()" ng-show="userDetails">Delete</a> <a href="" ng-click="edit()" ng-show="userDetails">Edit</a> <a href="" ng-click="share()" ng-show="userDetails">share link</a> <a href="" ng-click="logout()">log out</a></div></div>')}])}(),function(e){try{e=angular.module("handsomeTry")}catch(t){e=angular.module("handsomeTry",[])}e.run(["$templateCache",function(e){e.put("app/account/popUps/views/addPopUp.html",'<div class="modal-header"><div class="main-header"><h3 class="modal-title">Add emploee</h3></div><div class="close-button"><i class="fa fa-times" ng-click="cancel()" title="close without saving"></i></div></div><div class="modal-body"><div><label for="">Name <input type="text" ng-model="user.name"></label></div><div><label for="">job <input type="text" ng-model="user.job"></label></div><div><label for="">department <input type="text" ng-model="user.department"></label></div><div><small class="error" ng-show="showError">You should fill all fields</small></div></div><div class="modal-footer"><input type="button" value="ok" ng-click="ok()"></div>')}])}(),function(e){try{e=angular.module("handsomeTry")}catch(t){e=angular.module("handsomeTry",[])}e.run(["$templateCache",function(e){e.put("app/account/popUps/views/deletePopUp.html",'<div class="modal-header"><div class="main-header"><h3 class="modal-title">Delete emploee</h3></div><div class="close-button"><i class="fa fa-times" ng-click="cancel()" title="close without saving"></i></div></div><div class="modal-body">Are you shure you want to delete user with id {{id}}</div><div class="modal-footer"><input type="button" value="ok" ng-click="ok()"> <input type="button" value="cancel" ng-click="cancel()"></div>')}])}(),function(e){try{e=angular.module("handsomeTry")}catch(t){e=angular.module("handsomeTry",[])}e.run(["$templateCache",function(e){e.put("app/account/popUps/views/editPopUp.html",'<div class="modal-header"><div class="main-header"><h3 class="modal-title">Edit emploee</h3></div><div class="close-button"><i class="fa fa-times" ng-click="cancel()" title="close without saving"></i></div></div><div class="modal-body">You are going to edit user with id {{user.$id}}<div><label for="">Name <input type="text" ng-model="user.name"></label></div><div><label for="">job <input type="text" ng-model="details.job"></label></div><div><label for="">department <input type="text" ng-model="details.department"></label></div><div><small class="error" ng-show="showError">You should fill all fields</small></div></div><div class="modal-footer"><input type="button" value="ok" ng-click="ok()"></div>')}])}(),function(e){try{e=angular.module("handsomeTry")}catch(t){e=angular.module("handsomeTry",[])}e.run(["$templateCache",function(e){e.put("app/account/popUps/views/sharePopUp.html",'<div class="modal-header"><div class="main-header"><h3 class="modal-title">Share Page</h3></div><div class="close-button"><i class="fa fa-times" ng-click="cancel()" title="close without saving"></i></div></div><div class="modal-body">Copy this URL to share page<div>{{url}}</div></div><div class="modal-footer"><input type="button" value="ok" ng-click="ok()"></div>')}])}();